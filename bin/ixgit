#!/bin/bash

# Installs a github repository based on shortcuts defined in `/ixguard/etc/ixgit.conf`


# Save file as pgit in /ixguard/bin
# export PATH="$PATH:/ixguard/bin"

# Run like this:
# ixgit alias-name

# File at /ixguard/etc/ixgit.conf
# Has following format:
# proguard = proguard-github-link


# Debug
# set -x

COMMAND=$1
P1=$2

REPOSITORYURL=''
INSTALLPATH="//bin/$P1"
CONFFILE="/ixguard/etc/ixgit.conf"

function getRepositoryURL () {
	REPOSITORYURL=$(grep "^$1" "$CONFFILE" | cut -d \  -f 3)
}

case $COMMAND in
  install)
    getRepositoryURL $P1

    echo "Please input the path you would like to clone to [$INSTALLPATH]: "
    read PATHINPUT

    if [[ -n "$PATHINPUT" ]]; then
      INSTALLPATH="$PATHINPUT"
    fi

    echo "$REPOSITORYURL"

    git clone "$REPOSITORYURL" "$INSTALLPATH"
    ;;
  list)
    cat "$CONFFILE"
    ;;
  *)
    echo "BAD"
esac
